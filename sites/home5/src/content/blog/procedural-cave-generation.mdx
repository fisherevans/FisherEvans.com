---
title: "Procedural Cave Generation"
date: 2014-05-20
excerpt: Generating 2D tile-based caves with random passage ways and organic dimensions.
tags: [programming]
cover: ./procedural-cave-generation/cover.png
---

What's better than procedural generation with an organic twist?

In one of my previous posts I used a method to generate random dungeons based on graphs. In my implementation the rooms were rectangles, connected by hallways that would turn at 90 degrees - perfect for a dungeon. But caves have a different set of requirements:

- Cave passages need to be fluid and have curves.
- Cave walls need to be rugged, not confined to the 90 degree X and Y grid.
- Cave passages need to have dynamic widths: some larger, some smaller.
- Caves need larger areas, "caverns".

With these requirements in mind, I thought that if I randomly generate points on a grid and connected them with a [Relative Neighborhood Graph](https://en.wikipedia.org/wiki/Relative_neighborhood_graph) I could somehow morph the edges to create the curves and more "natural" walls.

To start, I generated the random points. The process is pretty straight forward - I have a predfined area within which I want the cave (defined by a width, height, and some padding).

```java
int x, y;
for (int pointId = 0; pointId < _pointCount; pointId++) {
    x = _random.nextInt(_width - _padding * 2) + _padding;
    y = _random.nextInt(_height - _padding * 2) + _padding;
    _points[pointId] = new Point(x, y);
}
```
